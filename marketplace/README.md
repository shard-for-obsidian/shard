# Shard Plugin Marketplace

This directory contains the Shard marketplace website and plugin metadata.

## Website

The marketplace website is built with [Hugo](https://gohugo.io/) and deployed to GitHub Pages.

**Live site:** https://gillisandrew.github.io/shard/

### Local Development

```bash
# Install Hugo (macOS)
brew install hugo

# Or download from https://gohugo.io/installation/

# Generate plugins.json from YAML files
cd marketplace
echo '{"plugins":[]}' > plugins.json
for file in plugins/*.yml; do
  if [ -f "$file" ]; then
    plugin_json=$(yq eval -o=json "$file")
    jq --argjson plugin "$plugin_json" '.plugins += [$plugin]' plugins.json > /tmp/merged.json
    mv /tmp/merged.json plugins.json
  fi
done

# Start development server
hugo server -D

# Open http://localhost:1313/shard/
```

### Site Structure

- `hugo.toml` - Hugo configuration
- `content/` - Markdown content pages
- `layouts/` - HTML templates
- `static/` - Static assets (CSS, images)
- `plugins/` - Plugin YAML source files
- `plugins.json` - Generated plugin index (auto-generated by GitHub Actions)

## Submitting Your Plugin

To submit your plugin to the Shard marketplace:

### Via CLI (Recommended)

```bash
# 1. Push your plugin to GHCR
shard push ./dist ghcr.io/username/your-plugin

# 2. Register to marketplace
shard marketplace register ghcr.io/username/your-plugin:1.0.0

# 3. Submit pull request with generated YAML
```

### Manually

1. Fork this repository
2. Create a new YAML file in `plugins/` directory named `<plugin-id>.yml`
3. Fill in the required metadata (see template below)
4. Submit a pull request

### Plugin Metadata Template

```yaml
id: your-plugin-id
registryUrl: ghcr.io/username/repository
name: Your Plugin Name
author: Your Name
description: A brief description of your plugin
version: 1.0.0
repository: https://github.com/username/repository
minObsidianVersion: 0.15.0
authorUrl: https://yourwebsite.com
updatedAt: 2025-02-05T00:00:00Z
```

**Required fields:**

- `id` - Plugin ID from manifest.json
- `registryUrl` - GHCR registry URL (e.g., ghcr.io/owner/repo)
- `name` - Plugin display name
- `author` - Plugin author
- `description` - Brief description
- `version` - Latest published version
- `updatedAt` - ISO 8601 timestamp

**Optional fields:**

- `repository` - GitHub repository URL (auto-derived from OCI annotations)
- `minObsidianVersion` - Minimum Obsidian version required
- `authorUrl` - Author website or profile URL
- `license` - Plugin license (e.g., MIT, GPL-3.0)
- `tags` - Array of category tags

### Requirements

- Plugin must be published to GHCR (GitHub Container Registry)
- Plugin must follow OCI format specification
- Plugin must include proper OCI annotations (automatically added by `shard push` and `shard convert`)
- Repository must be publicly accessible or provide auth documentation

## Automated Build

The `plugins.json` file and website are automatically generated and deployed via GitHub Actions:

1. When YAML files in `plugins/` change
2. GitHub Action generates `plugins.json` from YAML
3. Hugo builds the static site
4. Site is deployed to GitHub Pages

Do not edit `plugins.json` manually - it will be overwritten by the GitHub Action.
